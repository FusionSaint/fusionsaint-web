---
import Base from '../../layouts/Base.astro';
import { sanity, q } from '../../lib/sanity';

// Fetch all games (title + slug) from Sanity
const games = await sanity.fetch(q.games).catch(() => []);
---

<Base title="Games â€” FusionSaint" description="Browse all game guides on FusionSaint">
  <h1 class="text-3xl font-bold mb-6">Games</h1>

  {games.length === 0 ? (
    <p class="opacity-80">
      No games found yet. Add a <em>Game</em> document in Sanity Studio.
    </p>
  ) : (
    <ul class="grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4">
      {games.map((g) => (
        <li class="card p-5">
          <a class="hover:underline" href={`/games/${g.slug}/`}>{g.title}</a>
        </li>
      ))}
    </ul>
  )}
</Base>
